<!doctype html>
<html lang="en">
<head>
<meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<!-- Bootstrap CSS -->
<link href="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/css/bootstrap.min.css" rel="stylesheet">
<!-- Google Fonts -->
<link href="https://fonts.googleapis.com/css2?family=Roboto:wght@400;700&display=swap" rel="stylesheet">
<style>
  body {
    font-family: 'Roboto', sans-serif;
    background-color: #f8f9fa;
  }
  .navbar {
    background-color: #343a40;
  }
  .navbar-brand, .navbar-nav .nav-link {
    color: #e0e0e0;
  }
  .container {
    background: #fff;
    padding: 20px;
    border-radius: 10px;
    box-shadow: 0 0 10px rgba(0, 0, 0, 0.1);
  }
  .btn-primary {
    background-color: #28a745;
  }
  .hero-section {
    background-color: #343a40;
    color: #fff;
    padding: 100px 20px;
    text-align: center;
  }
  .secondary-nav {
    background-color: #f8f9fa;
    padding: 10px;
    text-align: center;
    margin-bottom: 20px;
  }
  .feature-icon {
    font-size: 50px;
    color: #007bff;
  }
  .footer {
    background-color: #f8f9fa;
    padding: 20px;
    text-align: center;
  }
  .active-constants {
    margin-bottom: 20px;
  }
</style>
<link href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.7.0/font/bootstrap-icons.css" rel="stylesheet">
<title>Top Secret Modeling</title>
</head>
<body>

<nav class="navbar navbar-expand-lg">
  <div class="container">
    <a class="navbar-brand" href="/">Top Secret Modeling</a>
    <button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbarNav" aria-controls="navbarNav" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>
    <div class="collapse navbar-collapse" id="navbarNav">
      <ul class="navbar-nav">
        <li class="nav-item">
          <a class="nav-link" href="/columns">Columns Selection</a>
        </li>
        <li class="nav-item">
          <a class="nav-link" href="/view_analysis">View Analysis</a>
        </li>
      </ul>
    </div>
  </div>
</nav>

<section class="hero-section">
  <h1>Welcome to Top Secret Modeling</h1>
  <p>Your hub for comprehensive NFL data analysis and insights</p>
  <button id="generate-analysis-btn" class="btn btn-primary">Generate Analysis for Games Collection</button>
  <div id="loading-spinner" style="display: none;">
    <i class="bi bi-arrow-repeat"></i> Generating analysis, please wait...
  </div>
</section>

<div class="secondary-nav">
  <a href="/columns" class="btn btn-outline-primary">Select Columns</a>
  <a href="/view_analysis" class="btn btn-outline-primary">View Analysis</a>
</div>

<div class="container mt-5">
  <div class="active-constants">
    <h5>Active Constants:</h5>
    <p>
      {% if active_constants %}
        {{ active_constants|join(', ') }}
      {% else %}
        None
      {% endif %}
    </p>
  </div>
  <section class="about-section">
    <h2>About Us</h2>
    <p>Your go-to platform for data-driven insights and competitive analysis in the world of NFL. From casual fans to serious analysts, we have something for everyone.</p>
  </section>

  <section class="features-section mt-5">
    <h2>Features</h2>
    <div class="row">
      <div class="col-md-4 text-center">
        <div class="feature-icon">
          <i class="bi bi-graph-up"></i>
        </div>
        <h4>Comprehensive Database</h4>
        <p>Over 100 stat categories to tailor your analysis and generate power rankings.</p>
      </div>
      <div class="col-md-4 text-center">
        <div class="feature-icon">
          <i class="bi bi-speedometer2"></i>
        </div>
        <h4>Simulation and Analysis</h4>
        <p>Run thousands of simulations to predict potential outcomes and strategies.</p>
      </div>
      <div class="col-md-4 text-center">
        <div class="feature-icon">
          <i class="bi bi-people-fill"></i>
        </div>
        <h4>Community and Engagement</h4>
        <p>Create profiles, save stats, and engage with a community of enthusiasts.</p>
      </div>
    </div>
  </section>
</div>

<footer class="footer">
  <p>&copy; 2023 Top Secret Modeling</p>
</footer>

<!-- Bootstrap JS and dependencies -->
<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/js/bootstrap.bundle.min.js"></script>
<script>
  document.getElementById('generate-analysis-btn').addEventListener('click', function() {
    // Show the loading spinner
    document.getElementById('loading-spinner').style.display = 'block';
    // Make a POST request to the /generate_analysis route
    fetch('/generate_analysis', {
      method: 'POST',
      headers: {
        'Content-Type': 'application/json'
      },
      body: JSON.stringify({ collection_name: 'games' })
    })
    .then(response => response.json())
    .then(data => {
      if (data.status === 'success') {
        // Redirect to the /view_analysis page
        window.location.href = '/view_analysis';
      } else {
        // Handle error (you can add more error handling here)
        alert('Error generating analysis');
      }
    });
  });
</script>
</body>
</html>
